<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ipsumOS - Laurenipsum</title>
    <style>
        /* ===== CSS VARIABLES & THEMES ===== */
        :root {
            --bg-primary: #1a1525;
            --bg-secondary: #251a30;
            --text-primary: #e8b4d8;
            --text-secondary: #d4a0c8;
            --accent-primary: #ff69b4;
            --accent-secondary: #87ceeb;
            --accent-tertiary: #98fb98;
            --window-bg: #201828;
            --window-border: #ff69b4;
            --taskbar-bg: rgba(255, 105, 180, 0.85);
            --sidebar-bg: rgba(30, 20, 40, 0.9);
            --ipod-body: linear-gradient(145deg, #ff69b4, #87ceeb);
            --ipod-wheel: #2a1f35;
            --pattern-color: rgba(255, 105, 180, 0.15);
        }

        [data-theme="dark"] {
            --bg-primary: #0a0015;
            --bg-secondary: #150025;
            --text-primary: #00ff88;
            --text-secondary: #00ffff;
            --accent-primary: #00ff88;
            --accent-secondary: #ff00ff;
            --accent-tertiary: #00ffff;
            --window-bg: #0f001a;
            --window-border: #00ff88;
            --taskbar-bg: rgba(0, 255, 136, 0.9);
            --sidebar-bg: rgba(10, 0, 21, 0.9);
            --ipod-body: linear-gradient(145deg, #00ff88, #00ffff);
            --ipod-wheel: #0a0015;
            --pattern-color: rgba(0, 255, 136, 0.1);
        }

        /* ===== CUSTOM CURSOR ===== */
        * {
            cursor: url('images/cursor/cursor.png'), auto;
        }

        a, button, .desktop-icon, .taskbar-item, .taskbar-start, .window-btn,
        .gallery-item, .link-btn, .spin-btn, .theme-toggle, [onclick] {
            cursor: url('images/cursor/pointer.png'), pointer;
        }

        /* ===== BASE STYLES ===== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Courier New', Courier, monospace;
            background: url('images/decoration/purpskybg.jpg') center/cover no-repeat fixed;
            background-color: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
            overflow: hidden;
            position: relative;
        }

        /* ===== SPACE BACKGROUND ===== */
        .space-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
            background:
                radial-gradient(ellipse at 20% 80%, rgba(120, 0, 255, 0.15) 0%, transparent 50%),
                radial-gradient(ellipse at 80% 20%, rgba(0, 150, 255, 0.15) 0%, transparent 50%),
                radial-gradient(ellipse at 50% 50%, rgba(100, 0, 150, 0.1) 0%, transparent 70%);
        }

        .stars {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
        }

        .stars::before,
        .stars::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image:
                radial-gradient(1px 1px at 10% 20%, white 100%, transparent),
                radial-gradient(1px 1px at 25% 35%, rgba(255,255,255,0.8) 100%, transparent),
                radial-gradient(1.5px 1.5px at 40% 15%, white 100%, transparent),
                radial-gradient(1px 1px at 55% 45%, rgba(255,255,255,0.6) 100%, transparent),
                radial-gradient(1px 1px at 70% 25%, white 100%, transparent),
                radial-gradient(1.5px 1.5px at 85% 55%, rgba(255,255,255,0.9) 100%, transparent),
                radial-gradient(1px 1px at 15% 60%, rgba(255,255,255,0.7) 100%, transparent),
                radial-gradient(1px 1px at 30% 75%, white 100%, transparent),
                radial-gradient(1.5px 1.5px at 50% 85%, rgba(255,255,255,0.8) 100%, transparent),
                radial-gradient(1px 1px at 65% 70%, white 100%, transparent),
                radial-gradient(1px 1px at 80% 90%, rgba(255,255,255,0.6) 100%, transparent),
                radial-gradient(1px 1px at 95% 40%, white 100%, transparent),
                radial-gradient(2px 2px at 5% 90%, rgba(0, 255, 136, 0.8) 100%, transparent),
                radial-gradient(2px 2px at 92% 8%, rgba(255, 0, 255, 0.8) 100%, transparent),
                radial-gradient(1px 1px at 45% 30%, rgba(0, 255, 255, 0.7) 100%, transparent);
            background-size: 100% 100%;
            animation: twinkle 4s ease-in-out infinite alternate;
        }

        .stars::after {
            background-image:
                radial-gradient(1px 1px at 8% 42%, white 100%, transparent),
                radial-gradient(1px 1px at 22% 68%, rgba(255,255,255,0.7) 100%, transparent),
                radial-gradient(1.5px 1.5px at 38% 52%, white 100%, transparent),
                radial-gradient(1px 1px at 52% 18%, rgba(255,255,255,0.8) 100%, transparent),
                radial-gradient(1px 1px at 68% 82%, white 100%, transparent),
                radial-gradient(1px 1px at 78% 38%, rgba(255,255,255,0.6) 100%, transparent),
                radial-gradient(1.5px 1.5px at 88% 72%, white 100%, transparent),
                radial-gradient(1px 1px at 18% 88%, rgba(255,255,255,0.9) 100%, transparent),
                radial-gradient(1px 1px at 35% 5%, white 100%, transparent),
                radial-gradient(1px 1px at 62% 95%, rgba(255,255,255,0.7) 100%, transparent);
            animation: twinkle 3s ease-in-out infinite alternate-reverse;
        }

        @keyframes twinkle {
            0% { opacity: 0.5; }
            100% { opacity: 1; }
        }

        /* Shooting Stars */
        .shooting-star {
            position: fixed;
            width: 4px;
            height: 4px;
            background: linear-gradient(45deg, white, transparent);
            border-radius: 50%;
            box-shadow: 0 0 6px 2px rgba(255, 255, 255, 0.6);
            opacity: 0;
            pointer-events: none;
            z-index: 0;
        }

        .shooting-star::after {
            content: '';
            position: absolute;
            left: 50%;
            bottom: 100%;
            transform: translateX(-50%);
            width: 1px;
            height: 80px;
            background: linear-gradient(180deg, transparent, rgba(255,255,255,0.8));
        }

        .shooting-star.animate {
            animation: shootingStar 1.5s ease-out forwards;
        }

        @keyframes shootingStar {
            0% {
                opacity: 1;
                transform: translate(0, 0) rotate(-45deg);
            }
            70% {
                opacity: 1;
            }
            100% {
                opacity: 0;
                transform: translate(300px, 300px) rotate(-45deg);
            }
        }

        /* Light mode tones down stars */
        :root .stars::before,
        :root .stars::after {
            opacity: 0.3;
        }

        [data-theme="dark"] .stars::before,
        [data-theme="dark"] .stars::after {
            opacity: 1;
        }

        /* ===== MAIN CONTAINER ===== */
        .desktop {
            display: flex;
            height: calc(100vh - 60px);
            position: relative;
            z-index: 1;
        }

        /* ===== SIDEBARS ===== */
        .sidebar {
            width: 180px;
            background: url('images/decoration/purplstar.gif') repeat;
            border: 2px solid var(--accent-primary);
            padding: 10px;
            font-size: 10px;
            line-height: 1.2;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        .sidebar-left {
            border-right: 2px solid var(--accent-primary);
        }

        .sidebar-right {
            border-left: 2px solid var(--accent-primary);
        }

        .ascii-art {
            white-space: pre;
            font-size: 8px;
            color: var(--accent-primary);
            text-align: center;
            margin-bottom: 10px;
        }

        .stats-box {
            background: var(--bg-secondary);
            border: 1px solid var(--accent-secondary);
            padding: 8px;
            margin: 5px 0;
            font-size: 11px;
        }

        .stats-box h4 {
            color: var(--accent-secondary);
            margin-bottom: 5px;
            text-transform: uppercase;
            font-size: 10px;
        }

        .stats-value {
            color: var(--accent-tertiary);
            font-weight: bold;
        }

        /* ===== DESKTOP ICONS AREA ===== */
        .desktop-main {
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            position: relative;
        }

        .icons-grid {
            display: grid;
            grid-template-columns: repeat(3, 140px);
            grid-template-rows: repeat(2, 140px);
            gap: 40px;
            justify-content: center;
            align-content: center;
        }

        .desktop-icon {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 15px;
            border: 2px solid transparent;
            border-radius: 12px;
            transition: all 0.3s ease;
            text-decoration: none;
            color: var(--text-primary);
        }

        .desktop-icon:hover {
            transform: scale(1.1);
        }

        .desktop-icon:hover .planet {
            box-shadow: 0 0 30px currentColor, 0 0 60px currentColor;
        }

        .desktop-icon .label {
            font-size: 13px;
            text-align: center;
            text-shadow: 0 0 10px rgba(0,0,0,0.8), 0 2px 4px rgba(0,0,0,0.9);
            margin-top: 12px;
            font-weight: bold;
            letter-spacing: 1px;
        }

        /* ===== PLANET ICONS ===== */
        .planet {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            position: relative;
            transition: all 0.3s ease;
            box-shadow: 0 0 20px currentColor, inset -8px -8px 20px rgba(0,0,0,0.4);
        }

        .planet::before {
            content: '';
            position: absolute;
            top: 10%;
            left: 15%;
            width: 25%;
            height: 20%;
            background: rgba(255,255,255,0.3);
            border-radius: 50%;
            filter: blur(3px);
        }

        /* iPod - Pink/Magenta planet with rings */
        .planet-ipod {
            background: linear-gradient(135deg, #ff1493 0%, #ff69b4 30%, #c71585 70%, #8b008b 100%);
            color: #ff1493;
        }

        .planet-ipod::after {
            content: '';
            position: absolute;
            top: 50%;
            left: -20%;
            width: 140%;
            height: 12px;
            border: 2px solid rgba(255,105,180,0.6);
            border-radius: 50%;
            transform: translateY(-50%) rotateX(70deg);
        }

        /* Slots - Gold/Orange gas giant */
        .planet-slots {
            background: linear-gradient(135deg, #ffd700 0%, #ff8c00 25%, #ff6347 50%, #dc143c 75%, #b22222 100%);
            color: #ffd700;
            background-size: 200% 200%;
            animation: gasGiant 8s ease infinite;
        }

        .planet-slots::after {
            content: '';
            position: absolute;
            top: 30%;
            left: 5%;
            width: 90%;
            height: 8%;
            background: rgba(255,200,100,0.4);
            border-radius: 50%;
            filter: blur(2px);
        }

        @keyframes gasGiant {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        /* Gallery - Purple nebula */
        .planet-gallery {
            background: radial-gradient(circle at 30% 30%, #ee82ee 0%, #9932cc 30%, #4b0082 70%, #2e0854 100%);
            color: #ee82ee;
            box-shadow: 0 0 20px #9932cc, 0 0 40px rgba(153,50,204,0.5), inset -8px -8px 20px rgba(0,0,0,0.4);
        }

        /* Blog - Cyan/Teal ice planet */
        .planet-blog {
            background: linear-gradient(135deg, #00ffff 0%, #00ced1 30%, #008b8b 60%, #006666 100%);
            color: #00ffff;
        }

        .planet-blog::after {
            content: '';
            position: absolute;
            top: 20%;
            left: 20%;
            width: 60%;
            height: 60%;
            border: 1px solid rgba(255,255,255,0.2);
            border-radius: 50%;
        }

        /* Links - Green matrix planet */
        .planet-links {
            background: radial-gradient(circle at 40% 40%, #00ff88 0%, #00cc66 30%, #008844 60%, #004422 100%);
            color: #00ff88;
        }

        /* About - Blue Earth-like */
        .planet-about {
            background:
                radial-gradient(circle at 30% 30%, rgba(255,255,255,0.1) 0%, transparent 50%),
                linear-gradient(135deg, #4169e1 0%, #1e90ff 25%, #00bfff 50%, #006994 75%, #00008b 100%);
            color: #00bfff;
        }

        .planet-about::after {
            content: '';
            position: absolute;
            top: 15%;
            left: 10%;
            width: 35%;
            height: 25%;
            background: rgba(144,238,144,0.3);
            border-radius: 30% 70% 50% 50%;
            filter: blur(2px);
        }

        /* Orbit animation on hover */
        .desktop-icon:hover .planet {
            animation: float 2s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-8px); }
        }

        /* ===== THEME TOGGLE ===== */
        .theme-toggle {
            position: fixed;
            top: 10px;
            right: 200px;
            z-index: 1000;
            background: var(--accent-primary);
            color: var(--bg-primary);
            border: none;
            padding: 8px 16px;
            font-family: inherit;
            font-size: 12px;
            border-radius: 4px;
            transition: all 0.3s;
        }

        .theme-toggle:hover {
            background: var(--accent-secondary);
            transform: scale(1.05);
        }

        /* ===== WINDOWS ===== */
        .window {
            position: absolute;
            background: var(--window-bg);
            border: 3px solid var(--window-border);
            border-radius: 8px;
            min-width: 300px;
            min-height: 200px;
            box-shadow: 8px 8px 0 rgba(0, 0, 0, 0.3);
            z-index: 100;
            display: none;
        }

        .window.active {
            display: block;
        }

        .window.focused {
            z-index: 200;
        }

        .window-header {
            background: var(--accent-primary);
            color: var(--bg-primary);
            padding: 8px 12px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-radius: 5px 5px 0 0;
            user-select: none;
        }

        .window-title {
            font-weight: bold;
            font-size: 14px;
        }

        .window-controls {
            display: flex;
            gap: 8px;
        }

        .window-btn {
            width: 20px;
            height: 20px;
            border: 2px solid var(--bg-primary);
            background: transparent;
            color: var(--bg-primary);
            font-size: 12px;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
            touch-action: manipulation;
            -webkit-tap-highlight-color: transparent;
        }

        .window-btn:hover {
            background: var(--bg-primary);
            color: var(--accent-primary);
        }

        .window-btn.close {
            background: #ff4444;
            border-color: #ff4444;
        }

        .window-btn.close:hover {
            background: #ff0000;
        }

        .window-content {
            padding: 15px;
            max-height: 400px;
            overflow-y: auto;
        }

        /* ===== TASKBAR ===== */
        .taskbar {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            height: 60px;
            background: url('images/decoration/taskbar.gif') repeat-x center;
            background-size: auto 100%;
            border-top: 3px solid var(--accent-secondary);
            display: flex;
            align-items: center;
            padding: 0 15px;
            gap: 8px;
            z-index: 500;
        }

        .taskbar-start {
            background: var(--bg-primary);
            color: var(--accent-primary);
            border: 2px solid var(--accent-primary);
            padding: 8px 20px;
            font-family: inherit;
            font-weight: bold;
            font-size: 14px;
            margin-right: 15px;
        }

        .taskbar-start:hover {
            background: var(--accent-primary);
            color: var(--bg-primary);
        }

        .taskbar-items {
            display: flex;
            gap: 8px;
            flex: 1;
            overflow-x: auto;
            overflow-y: hidden;
            -webkit-overflow-scrolling: touch;
            scrollbar-width: none;
            -ms-overflow-style: none;
        }

        .taskbar-items::-webkit-scrollbar {
            display: none;
        }

        .taskbar-item {
            background: var(--bg-primary);
            color: var(--text-primary);
            border: 2px solid var(--accent-secondary);
            padding: 8px 16px;
            font-family: inherit;
            font-size: 13px;
            font-weight: bold;
            max-width: 160px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            flex-shrink: 0;
            touch-action: manipulation;
        }

        .taskbar-item:hover {
            background: var(--accent-secondary);
            color: #000;
        }

        .taskbar-item.active {
            border-color: var(--accent-primary);
            background: var(--bg-primary);
            color: var(--accent-primary);
            box-shadow: inset 0 -3px 0 var(--accent-primary);
        }

        .taskbar-clock {
            color: var(--bg-primary);
            font-size: 14px;
            font-weight: bold;
            padding: 0 15px;
        }

        /* ===== iPOD STYLES ===== */
        .ipod {
            position: absolute;
            width: 200px;
            height: 340px;
            background: var(--ipod-body);
            border-radius: 20px;
            padding: 15px;
            box-shadow:
                inset 0 2px 10px rgba(255,255,255,0.3),
                0 8px 20px rgba(0,0,0,0.4);
            z-index: 300;
            display: none;
            left: 50px;
            top: 100px;
            user-select: none;
        }

        .ipod.active {
            display: block;
        }

        .ipod-screen {
            width: 100%;
            height: 120px;
            background: #1a1a2e;
            border-radius: 8px;
            border: 3px solid #333;
            padding: 10px;
            color: #00ff88;
            font-size: 10px;
            overflow: hidden;
        }

        .ipod-screen-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 9px;
            opacity: 0.8;
        }

        .ipod-now-playing {
            text-align: center;
            overflow: hidden;
        }

        .ipod-track-name {
            font-size: 12px;
            font-weight: bold;
            margin-bottom: 5px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .ipod-track-name.scrolling {
            animation: marquee 6s linear infinite;
            overflow: visible;
        }

        @keyframes marquee {
            0% { transform: translateX(100%); }
            100% { transform: translateX(-100%); }
        }

        .ipod-artist {
            font-size: 10px;
            opacity: 0.7;
        }

        .ipod-time {
            display: flex;
            justify-content: space-between;
            font-size: 8px;
            margin-top: 5px;
            opacity: 0.7;
        }

        .ipod-progress {
            margin-top: 5px;
            height: 4px;
            background: #333;
            border-radius: 2px;
            overflow: hidden;
        }

        .ipod-progress-bar {
            height: 100%;
            width: 0%;
            background: #00ff88;
            transition: width 0.5s linear;
        }

        .ipod-wheel {
            width: 140px;
            height: 140px;
            background: var(--ipod-wheel);
            border-radius: 50%;
            margin: 15px auto 0;
            position: relative;
            box-shadow:
                inset 0 5px 15px rgba(0,0,0,0.2),
                0 3px 10px rgba(0,0,0,0.3);
        }

        .ipod-wheel-center {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 50px;
            height: 50px;
            background: var(--accent-primary);
            border-radius: 50%;
            box-shadow: 0 2px 5px rgba(0,0,0,0.3);
            transition: all 0.1s;
        }

        .ipod-wheel-center:hover {
            transform: translate(-50%, -50%) scale(1.05);
        }

        .ipod-wheel-center:active {
            transform: translate(-50%, -50%) scale(0.95);
        }

        .ipod-wheel-btn {
            position: absolute;
            font-size: 10px;
            color: var(--text-primary);
            font-weight: bold;
            background: none;
            border: none;
            padding: 8px;
            transition: all 0.1s;
        }

        .ipod-wheel-btn:hover {
            transform: scale(1.2);
        }

        .ipod-wheel-btn:active {
            transform: scale(0.9);
        }

        .ipod-wheel-btn.top { top: 5px; left: 50%; transform: translateX(-50%); }
        .ipod-wheel-btn.top:hover { transform: translateX(-50%) scale(1.2); }
        .ipod-wheel-btn.bottom { bottom: 5px; left: 50%; transform: translateX(-50%); }
        .ipod-wheel-btn.bottom:hover { transform: translateX(-50%) scale(1.2); }
        .ipod-wheel-btn.left { left: 5px; top: 50%; transform: translateY(-50%); }
        .ipod-wheel-btn.left:hover { transform: translateY(-50%) scale(1.2); }
        .ipod-wheel-btn.right { right: 5px; top: 50%; transform: translateY(-50%); }
        .ipod-wheel-btn.right:hover { transform: translateY(-50%) scale(1.2); }

        .ipod-close {
            position: absolute;
            top: -10px;
            right: -10px;
            width: 24px;
            height: 24px;
            background: #ff4444;
            border: 2px solid #fff;
            border-radius: 50%;
            color: #fff;
            font-size: 14px;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.3);
        }

        .ipod-close:hover {
            background: #ff0000;
            transform: scale(1.1);
        }

        /* ===== SLOTS GAME ===== */
        .slots-container {
            text-align: center;
        }

        .slots-title {
            color: var(--accent-primary);
            font-size: 24px;
            margin-bottom: 20px;
            text-shadow: 2px 2px var(--accent-secondary);
        }

        .slots-machine {
            background: linear-gradient(180deg, #333 0%, #111 100%);
            border: 4px solid var(--accent-tertiary);
            border-radius: 15px;
            padding: 20px;
            display: inline-block;
        }

        .slots-display {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-bottom: 20px;
        }

        .slot-reel {
            width: 60px;
            height: 80px;
            background: #fff;
            border: 3px solid var(--accent-primary);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 40px;
            box-shadow: inset 0 0 10px rgba(0,0,0,0.3);
        }

        .slot-reel.spinning {
            animation: slotSpin 0.1s infinite;
        }

        @keyframes slotSpin {
            0% { transform: translateY(-5px); }
            50% { transform: translateY(5px); }
            100% { transform: translateY(-5px); }
        }

        .slots-points {
            color: var(--accent-tertiary);
            font-size: 20px;
            margin-bottom: 15px;
        }

        .slots-message {
            color: var(--accent-secondary);
            font-size: 16px;
            margin-bottom: 15px;
            min-height: 24px;
        }

        .spin-btn {
            background: linear-gradient(180deg, var(--accent-primary), var(--accent-secondary));
            color: #fff;
            border: 3px solid var(--accent-tertiary);
            padding: 15px 40px;
            font-family: inherit;
            font-size: 18px;
            font-weight: bold;
            border-radius: 10px;
            text-transform: uppercase;
            transition: all 0.2s;
            touch-action: manipulation;
            -webkit-tap-highlight-color: transparent;
        }

        .spin-btn:hover:not(:disabled) {
            transform: scale(1.05);
            box-shadow: 0 0 20px var(--accent-primary);
        }

        .spin-btn:disabled {
            opacity: 0.5;
        }

        /* ===== GALLERY ===== */
        .gallery-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 15px;
        }

        .gallery-item {
            border: 2px solid var(--accent-primary);
            border-radius: 8px;
            overflow: hidden;
            transition: transform 0.2s;
            touch-action: manipulation;
            -webkit-tap-highlight-color: transparent;
        }

        .gallery-item:hover {
            transform: scale(1.05);
            box-shadow: 0 0 15px var(--accent-primary);
        }

        .gallery-item img {
            width: 100%;
            height: 100px;
            object-fit: cover;
        }

        .gallery-item-title {
            padding: 8px;
            font-size: 10px;
            text-align: center;
            background: var(--bg-secondary);
        }

        .gallery-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.9);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .gallery-modal.active {
            display: flex;
        }

        .gallery-modal img {
            max-width: 90%;
            max-height: 90%;
            border: 4px solid var(--accent-primary);
        }

        .gallery-modal-close {
            position: absolute;
            top: 20px;
            right: 30px;
            color: #fff;
            font-size: 40px;
            background: none;
            border: none;
        }

        /* ===== BLOG ===== */
        .blog-post {
            background: var(--bg-secondary);
            border: 2px solid var(--accent-secondary);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
        }

        .blog-date {
            color: var(--accent-primary);
            font-size: 11px;
            margin-bottom: 8px;
        }

        .blog-content {
            font-size: 14px;
            line-height: 1.6;
        }

        /* ===== LINKS ===== */
        .links-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
        }

        .link-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            padding: 15px;
            background: var(--bg-secondary);
            border: 2px solid var(--accent-primary);
            border-radius: 8px;
            color: var(--text-primary);
            text-decoration: none;
            font-size: 14px;
            transition: all 0.2s;
        }

        .link-btn:hover {
            background: var(--accent-primary);
            color: var(--bg-primary);
            transform: scale(1.05);
        }

        .link-btn .icon {
            font-size: 24px;
        }

        /* ===== ABOUT ===== */
        .about-content {
            text-align: center;
        }

        .about-title {
            font-size: 28px;
            color: var(--accent-primary);
            margin-bottom: 20px;
            letter-spacing: 4px;
        }

        .about-bio {
            font-size: 14px;
            line-height: 1.8;
            margin-bottom: 20px;
        }

        .about-ascii {
            font-size: 8px;
            color: var(--accent-secondary);
            margin-top: 20px;
        }

        /* ===== CONFETTI ===== */
        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            pointer-events: none;
            z-index: 9999;
            animation: confetti-burst 2s ease-out forwards;
        }

        @keyframes confetti-burst {
            0% {
                opacity: 1;
                transform: translate(0, 0) rotate(0deg) scale(1);
            }
            100% {
                opacity: 0;
                transform: translate(var(--x), var(--y)) rotate(var(--r)) scale(0.5);
            }
        }

        /* ===== SCROLLBAR ===== */
        ::-webkit-scrollbar {
            width: 10px;
        }

        ::-webkit-scrollbar-track {
            background: var(--bg-secondary);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--accent-primary);
            border-radius: 5px;
        }

        /* ===== RESPONSIVE ===== */
        @media (max-width: 900px) {
            .sidebar {
                display: none;
            }

            .theme-toggle {
                right: 10px;
            }

            .icons-grid {
                grid-template-columns: repeat(2, 120px);
                grid-template-rows: repeat(3, 120px);
                gap: 30px;
            }
        }

        @media (max-width: 500px) {
            .icons-grid {
                grid-template-columns: repeat(2, 100px);
                grid-template-rows: repeat(3, 100px);
                gap: 20px;
            }

            .planet {
                width: 45px;
                height: 45px;
            }

            .desktop-icon .label {
                font-size: 11px;
                margin-top: 8px;
            }
        }
    </style>
</head>
<body>
    <!-- Space Background -->
    <div class="space-bg"></div>
    <div class="stars"></div>

    <!-- Theme Toggle -->
    <button class="theme-toggle" onclick="toggleTheme()">
        <span id="theme-icon">LIGHT MODE</span>
    </button>

    <!-- Main Desktop -->
    <div class="desktop">
        <!-- Left Sidebar -->
        <div class="sidebar sidebar-left">
            <div class="ascii-art" id="ascii-left">
<!-- ASCII art placeholder -->
            </div>
        </div>

        <!-- Desktop Icons Area -->
        <div class="desktop-main">
            <div class="icons-grid">
                <div class="desktop-icon" onclick="toggleIpod()">
                    <div class="planet planet-ipod"></div>
                    <span class="label">iPod</span>
                </div>
                <div class="desktop-icon" onclick="openWindow('slots')">
                    <div class="planet planet-slots"></div>
                    <span class="label">Slots</span>
                </div>
                <div class="desktop-icon" onclick="openWindow('gallery')">
                    <div class="planet planet-gallery"></div>
                    <span class="label">Gallery</span>
                </div>
                <div class="desktop-icon" onclick="openWindow('blog')">
                    <div class="planet planet-blog"></div>
                    <span class="label">Blog</span>
                </div>
                <div class="desktop-icon" onclick="openWindow('links')">
                    <div class="planet planet-links"></div>
                    <span class="label">Links</span>
                </div>
                <div class="desktop-icon" onclick="openWindow('about')">
                    <div class="planet planet-about"></div>
                    <span class="label">About</span>
                </div>
            </div>
        </div>

        <!-- Right Sidebar -->
        <div class="sidebar sidebar-right">
            <div class="ascii-art" id="ascii-right">
<!-- ASCII art placeholder -->
            </div>
            <div class="stats-box">
                <h4>SLOTS</h4>
                <div>POINTS:</div>
                <div class="stats-value" id="sidebar-points">100</div>
            </div>
            <div class="stats-box">
                <h4>SPINS</h4>
                <div class="stats-value" id="sidebar-spins">0</div>
            </div>
            <div class="stats-box">
                <h4>WINS</h4>
                <div class="stats-value" id="sidebar-wins">0</div>
            </div>
        </div>
    </div>

    <!-- Standalone iPod (draggable) -->
    <div class="ipod" id="ipod">
        <button class="ipod-close" onclick="toggleIpod()">X</button>
        <div class="ipod-screen">
            <div class="ipod-screen-header">
                <span>iPod</span>
                <span id="ipod-status">‚è∏</span>
            </div>
            <div class="ipod-now-playing">
                <div class="ipod-track-name" id="ipod-track">No Track</div>
                <div class="ipod-artist" id="ipod-artist">-</div>
                <div class="ipod-time">
                    <span id="ipod-current-time">0:00</span>
                    <span id="ipod-duration">0:00</span>
                </div>
                <div class="ipod-progress">
                    <div class="ipod-progress-bar" id="ipod-progress-bar"></div>
                </div>
            </div>
        </div>
        <div class="ipod-wheel">
            <button class="ipod-wheel-btn top" onclick="ipodMenu()">MENU</button>
            <button class="ipod-wheel-btn bottom" onclick="ipodPlayPause()">‚èØÔ∏è</button>
            <button class="ipod-wheel-btn left" onclick="ipodPrev()">‚èÆÔ∏è</button>
            <button class="ipod-wheel-btn right" onclick="ipodNext()">‚è≠Ô∏è</button>
            <button class="ipod-wheel-center" onclick="ipodPlayPause()"></button>
        </div>
    </div>
    <audio id="ipod-audio"></audio>
    <audio id="sound-slotroll" src="sounds/slotroll.wav"></audio>

    <!-- Windows -->

    <!-- Slots Window -->
    <div class="window" id="window-slots" style="width: 350px; height: 400px; left: 150px; top: 80px;">
        <div class="window-header">
            <span class="window-title">8-Bit Slots</span>
            <div class="window-controls">
                <button class="window-btn minimize" onclick="minimizeWindow('slots')">_</button>
                <button class="window-btn close" onclick="closeWindow('slots')">X</button>
            </div>
        </div>
        <div class="window-content">
            <div class="slots-container">
                <div class="slots-title">FRUIT SLOTS</div>
                <div class="slots-machine">
                    <div class="slots-display">
                        <div class="slot-reel" id="reel1">üçí</div>
                        <div class="slot-reel" id="reel2">üçã</div>
                        <div class="slot-reel" id="reel3">üçä</div>
                    </div>
                    <div class="slots-points">POINTS: <span id="points-display">100</span></div>
                    <div class="slots-message" id="slots-message">SPIN TO WIN!</div>
                    <button class="spin-btn" id="spin-btn" onclick="spinSlots()">SPIN (10 PTS)</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Gallery Window -->
    <div class="window" id="window-gallery" style="width: 450px; height: 380px; left: 200px; top: 60px;">
        <div class="window-header">
            <span class="window-title">Gallery</span>
            <div class="window-controls">
                <button class="window-btn minimize" onclick="minimizeWindow('gallery')">_</button>
                <button class="window-btn close" onclick="closeWindow('gallery')">X</button>
            </div>
        </div>
        <div class="window-content">
            <div class="gallery-grid" id="gallery-grid">
                <!-- Loaded from JSON -->
            </div>
        </div>
    </div>

    <!-- Blog Window -->
    <div class="window" id="window-blog" style="width: 400px; height: 350px; left: 250px; top: 100px;">
        <div class="window-header">
            <span class="window-title">Blog</span>
            <div class="window-controls">
                <button class="window-btn minimize" onclick="minimizeWindow('blog')">_</button>
                <button class="window-btn close" onclick="closeWindow('blog')">X</button>
            </div>
        </div>
        <div class="window-content">
            <div id="blog-posts">
                <!-- Loaded from JSON -->
            </div>
        </div>
    </div>

    <!-- Links Window -->
    <div class="window" id="window-links" style="width: 350px; height: 320px; left: 180px; top: 90px;">
        <div class="window-header">
            <span class="window-title">Links</span>
            <div class="window-controls">
                <button class="window-btn minimize" onclick="minimizeWindow('links')">_</button>
                <button class="window-btn close" onclick="closeWindow('links')">X</button>
            </div>
        </div>
        <div class="window-content">
            <div class="links-grid">
                <a href="https://soundcloud.com/dolaurenipsum" target="_blank" class="link-btn">
                    <span class="icon">üîä</span>
                    <span>SoundCloud</span>
                </a>
                <a href="https://www.youtube.com/@painitself" target="_blank" class="link-btn">
                    <span class="icon">üì∫</span>
                    <span>YouTube</span>
                </a>
                <a href="https://www.instagram.com/laurenipsumdj/" target="_blank" class="link-btn">
                    <span class="icon">üì∑</span>
                    <span>Instagram</span>
                </a>
                <a href="https://www.twitch.tv/ltomlee" target="_blank" class="link-btn">
                    <span class="icon">üéÆ</span>
                    <span>Twitch</span>
                </a>
                <a href="https://streamlabs.com/ltomlee/tip" target="_blank" class="link-btn" style="grid-column: span 2;">
                    <span class="icon">üíù</span>
                    <span>Support / Donate</span>
                </a>
            </div>
        </div>
    </div>

    <!-- About Window -->
    <div class="window" id="window-about" style="width: 400px; height: 350px; left: 220px; top: 70px;">
        <div class="window-header">
            <span class="window-title">About</span>
            <div class="window-controls">
                <button class="window-btn minimize" onclick="minimizeWindow('about')">_</button>
                <button class="window-btn close" onclick="closeWindow('about')">X</button>
            </div>
        </div>
        <div class="window-content">
            <div class="about-content">
                <div class="about-title">‚≥ê‚≤Å‚≥ô‚≤Ö‚≤â‚≤õ‚≥ï‚≥è‚≥Ω‚≥ô‚≤ô</div>
                <div class="about-bio">
                    DJ / Music Producer / Painter<br><br>
                    Welcome to ipsumOS - my digital space.<br>
                    <br><br>
                    Based in the void between pixels and sound waves.
                </div>
                <pre class="about-ascii" id="about-ascii">
<!-- ASCII art placeholder -->
                </pre>
            </div>
        </div>
    </div>

    <!-- Gallery Modal -->
    <div class="gallery-modal" id="gallery-modal" onclick="closeGalleryModal()">
        <button class="gallery-modal-close">&times;</button>
        <img id="gallery-modal-img" src="" alt="">
    </div>

    <!-- Taskbar -->
    <div class="taskbar">
        <button class="taskbar-start">ipsumOS</button>
        <div class="taskbar-items" id="taskbar-items">
            <!-- Dynamic taskbar items -->
        </div>
        <div class="taskbar-clock" id="taskbar-clock">00:00</div>
    </div>

    <script>
        // ===== STATE =====
        let openWindows = new Set();
        let focusedWindow = null;
        let draggedWindow = null;
        let dragOffset = { x: 0, y: 0 };

        // Slots game state
        let points = parseInt(localStorage.getItem('slotsPoints')) || 100;
        let totalSpins = parseInt(localStorage.getItem('slotsSpins')) || 0;
        let totalWins = parseInt(localStorage.getItem('slotsWins')) || 0;

        const symbols = ['üçí', 'üçã', 'üçä', 'üçá', 'üçâ', '‚≠ê', 'üíé'];

        // ===== THEME =====
        function toggleTheme() {
            const html = document.documentElement;
            const current = html.getAttribute('data-theme');
            const newTheme = current === 'dark' ? 'light' : 'dark';
            html.setAttribute('data-theme', newTheme);
            document.getElementById('theme-icon').textContent =
                newTheme === 'dark' ? 'LIGHT MODE' : 'DARK MODE';
            localStorage.setItem('theme', newTheme);
        }

        // Load saved theme (default to dark for new visitors)
        const savedTheme = localStorage.getItem('theme') || 'dark';
        if (savedTheme === 'dark') {
            document.documentElement.setAttribute('data-theme', 'dark');
            document.getElementById('theme-icon').textContent = 'LIGHT MODE';
        } else {
            document.getElementById('theme-icon').textContent = 'DARK MODE';
        }

        // ===== CLOCK =====
        function updateClock() {
            const now = new Date();
            const hours = String(now.getHours()).padStart(2, '0');
            const mins = String(now.getMinutes()).padStart(2, '0');
            document.getElementById('taskbar-clock').textContent = `${hours}:${mins}`;
        }
        updateClock();
        setInterval(updateClock, 1000);

        // ===== WINDOW MANAGEMENT =====
        function openWindow(id) {
            const win = document.getElementById(`window-${id}`);
            // Toggle behavior - close if already open and active
            if (win.classList.contains('active')) {
                closeWindow(id);
                return;
            }
            win.classList.add('active');
            openWindows.add(id);
            focusWindow(id);
            updateTaskbar();
        }

        function closeWindow(id) {
            const win = document.getElementById(`window-${id}`);
            win.classList.remove('active');
            openWindows.delete(id);
            updateTaskbar();
        }

        function minimizeWindow(id) {
            const win = document.getElementById(`window-${id}`);
            win.classList.remove('active');
            // Keep in openWindows for taskbar
            updateTaskbar();
        }

        function focusWindow(id) {
            document.querySelectorAll('.window').forEach(w => w.classList.remove('focused'));
            const win = document.getElementById(`window-${id}`);
            win.classList.add('focused');
            focusedWindow = id;
            updateTaskbar();
        }

        function updateTaskbar() {
            const container = document.getElementById('taskbar-items');
            container.innerHTML = '';

            const names = {
                slots: 'üé∞ Slots',
                gallery: 'üé® Gallery',
                blog: 'üìù Blog',
                links: 'üîó Links',
                about: '‚ÑπÔ∏è About'
            };

            openWindows.forEach(id => {
                const btn = document.createElement('button');
                btn.className = 'taskbar-item';
                if (focusedWindow === id && document.getElementById(`window-${id}`).classList.contains('active')) {
                    btn.classList.add('active');
                }
                btn.textContent = names[id] || id;
                btn.onclick = () => {
                    const win = document.getElementById(`window-${id}`);
                    if (win.classList.contains('active')) {
                        if (focusedWindow === id) {
                            minimizeWindow(id);
                        } else {
                            focusWindow(id);
                        }
                    } else {
                        win.classList.add('active');
                        focusWindow(id);
                    }
                };
                container.appendChild(btn);
            });
        }

        // ===== DRAGGING (Mouse + Touch) =====
        function startDrag(e, header) {
            // Check if target is a button or inside a button
            if (e.target.closest('.window-btn') || e.target.closest('.window-controls')) return;

            const win = header.parentElement;
            draggedWindow = win;
            const rect = win.getBoundingClientRect();

            const clientX = e.touches ? e.touches[0].clientX : e.clientX;
            const clientY = e.touches ? e.touches[0].clientY : e.clientY;

            dragOffset.x = clientX - rect.left;
            dragOffset.y = clientY - rect.top;

            const id = win.id.replace('window-', '');
            focusWindow(id);

            if (e.touches) e.preventDefault();
        }

        function moveDrag(e) {
            if (!draggedWindow) return;

            const clientX = e.touches ? e.touches[0].clientX : e.clientX;
            const clientY = e.touches ? e.touches[0].clientY : e.clientY;

            const x = clientX - dragOffset.x;
            const y = clientY - dragOffset.y;

            draggedWindow.style.left = Math.max(0, x) + 'px';
            draggedWindow.style.top = Math.max(0, y) + 'px';

            if (e.touches) e.preventDefault();
        }

        function endDrag() {
            draggedWindow = null;
        }

        document.querySelectorAll('.window-header').forEach(header => {
            header.addEventListener('mousedown', (e) => startDrag(e, header));
            header.addEventListener('touchstart', (e) => startDrag(e, header), { passive: false });
        });

        document.addEventListener('mousemove', moveDrag);
        document.addEventListener('touchmove', moveDrag, { passive: false });

        document.addEventListener('mouseup', endDrag);
        document.addEventListener('touchend', endDrag);

        // Focus window on click/touch
        document.querySelectorAll('.window').forEach(win => {
            win.addEventListener('mousedown', () => {
                const id = win.id.replace('window-', '');
                focusWindow(id);
            });
            win.addEventListener('touchstart', () => {
                const id = win.id.replace('window-', '');
                focusWindow(id);
            });
        });

        // ===== MOBILE TOUCH SUPPORT =====
        // Add explicit touch handlers for window buttons
        document.querySelectorAll('.window-btn').forEach(btn => {
            btn.addEventListener('touchend', (e) => {
                e.preventDefault();
                e.stopPropagation();
                btn.click();
            }, { passive: false });
        });

        // Add touch handler for gallery modal close button
        document.querySelector('.gallery-modal-close')?.addEventListener('touchend', (e) => {
            e.preventDefault();
            closeGalleryModal();
        }, { passive: false });

        // Add touch handler for gallery modal background
        document.getElementById('gallery-modal')?.addEventListener('touchend', (e) => {
            if (e.target.id === 'gallery-modal') {
                e.preventDefault();
                closeGalleryModal();
            }
        }, { passive: false });

        // Add touch handler for spin button
        document.getElementById('spin-btn')?.addEventListener('touchend', (e) => {
            e.preventDefault();
            spinSlots();
        }, { passive: false });

        // Event delegation for gallery items (dynamically created)
        document.getElementById('gallery-grid')?.addEventListener('touchend', (e) => {
            const galleryItem = e.target.closest('.gallery-item');
            if (galleryItem) {
                e.preventDefault();
                const img = galleryItem.querySelector('img');
                if (img) {
                    openGalleryModal(img.src);
                }
            }
        }, { passive: false });

        // ===== SLOTS GAME =====
        const soundRoll = document.getElementById('sound-slotroll');

        function updatePointsDisplay() {
            document.getElementById('points-display').textContent = points;
            document.getElementById('sidebar-points').textContent = points;
            document.getElementById('sidebar-spins').textContent = totalSpins;
            document.getElementById('sidebar-wins').textContent = totalWins;
            localStorage.setItem('slotsPoints', points);
            localStorage.setItem('slotsSpins', totalSpins);
            localStorage.setItem('slotsWins', totalWins);
        }

        function spinSlots() {
            if (points < 10) {
                document.getElementById('slots-message').textContent = 'NOT ENOUGH POINTS!';
                return;
            }

            points -= 10;
            totalSpins++;
            updatePointsDisplay();

            const btn = document.getElementById('spin-btn');
            btn.disabled = true;

            // Play roll sound
            soundRoll.currentTime = 0;
            soundRoll.play();

            const reels = [
                document.getElementById('reel1'),
                document.getElementById('reel2'),
                document.getElementById('reel3')
            ];

            reels.forEach(r => r.classList.add('spinning'));
            document.getElementById('slots-message').textContent = 'SPINNING...';

            const results = [];
            const delays = [1000, 2000, 3000];

            reels.forEach((reel, i) => {
                setTimeout(() => {
                    reel.classList.remove('spinning');
                    const symbol = symbols[Math.floor(Math.random() * symbols.length)];
                    reel.textContent = symbol;
                    results.push(symbol);

                    if (results.length === 3) {
                        checkWin(results);
                        btn.disabled = false;
                    }
                }, delays[i]);
            });
        }

        function checkWin(results) {
            const [a, b, c] = results;
            let msg = '';
            let winAmount = 0;
            let isWin = false;

            if (a === b && b === c) {
                // Three of a kind
                if (a === 'üíé') {
                    winAmount = 500;
                    msg = 'JACKPOT!!! +500';
                } else if (a === '‚≠ê') {
                    winAmount = 200;
                    msg = 'STARS!!! +200';
                } else {
                    winAmount = 100;
                    msg = 'THREE OF A KIND! +100';
                }
                totalWins++;
                isWin = true;
            } else if (a === b || b === c || a === c) {
                winAmount = 20;
                msg = 'TWO MATCH! +20';
                totalWins++;
                isWin = true;
            } else {
                msg = 'TRY AGAIN!';
            }

            // Stop roll sound and play win sound if won
            if (isWin) {
                soundRoll.pause();
                soundRoll.currentTime = 0;
                // Create fresh audio to avoid any caching/duplicate issues
                const winSound = new Audio('sounds/slotwinfr.wav');
                winSound.play();
                createConfetti();
            }

            points += winAmount;
            updatePointsDisplay();
            document.getElementById('slots-message').textContent = msg;
        }

        function createConfetti() {
            const slotsWindow = document.getElementById('window-slots');
            const rect = slotsWindow.getBoundingClientRect();
            const colors = ['#ff1493', '#00ff88', '#00bfff', '#ffd700', '#ff00ff', '#00ffff'];

            for (let i = 0; i < 50; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.left = (rect.left + rect.width / 2 + (Math.random() - 0.5) * 100) + 'px';
                confetti.style.top = (rect.top + 50) + 'px';
                confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                confetti.style.setProperty('--x', (Math.random() - 0.5) * 300 + 'px');
                confetti.style.setProperty('--y', Math.random() * 200 + 100 + 'px');
                confetti.style.setProperty('--r', Math.random() * 720 - 360 + 'deg');
                document.body.appendChild(confetti);

                setTimeout(() => confetti.remove(), 2000);
            }
        }

        // Initialize points display
        updatePointsDisplay();

        // ===== LOAD DATA =====
        async function loadPaintings() {
            try {
                const response = await fetch('data/paintings.json');
                const paintings = await response.json();
                const grid = document.getElementById('gallery-grid');

                grid.innerHTML = paintings.map(p => `
                    <div class="gallery-item" onclick="openGalleryModal('${p.image}')">
                        <img src="${p.image}" alt="${p.title}">
                        <div class="gallery-item-title">${p.title}</div>
                    </div>
                `).join('');
            } catch (e) {
                console.log('Could not load paintings:', e);
                document.getElementById('gallery-grid').innerHTML = '<p>No paintings yet...</p>';
            }
        }

        async function loadPosts() {
            try {
                const response = await fetch('data/posts.json');
                const posts = await response.json();
                const container = document.getElementById('blog-posts');

                container.innerHTML = posts.map(p => `
                    <div class="blog-post">
                        <div class="blog-date">${p.date}</div>
                        <div class="blog-content">${p.content}</div>
                    </div>
                `).join('');
            } catch (e) {
                console.log('Could not load posts:', e);
                document.getElementById('blog-posts').innerHTML = '<p>No posts yet...</p>';
            }
        }

        // Gallery modal
        function openGalleryModal(src) {
            const modal = document.getElementById('gallery-modal');
            const img = document.getElementById('gallery-modal-img');
            img.src = src;
            modal.classList.add('active');
        }

        function closeGalleryModal() {
            document.getElementById('gallery-modal').classList.remove('active');
        }

        // ===== iPOD FUNCTIONALITY =====
        let ipodTracks = [];
        let currentTrackIndex = 0;
        let isPlaying = false;
        const ipodAudio = document.getElementById('ipod-audio');
        const ipodElement = document.getElementById('ipod');
        let ipodDragging = false;

        function toggleIpod() {
            const isActive = ipodElement.classList.toggle('active');
            // Pause audio when closing iPod
            if (!isActive && isPlaying) {
                ipodAudio.pause();
                isPlaying = false;
                document.getElementById('ipod-status').textContent = '‚è∏';
            }
        }

        async function loadTracks() {
            try {
                const response = await fetch('data/tracks.json');
                ipodTracks = await response.json();
                if (ipodTracks.length > 0) {
                    loadTrack(0);
                }
            } catch (e) {
                console.log('Could not load tracks:', e);
            }
        }

        function loadTrack(index) {
            if (ipodTracks.length === 0) return;
            currentTrackIndex = index;
            const track = ipodTracks[index];
            document.getElementById('ipod-track').textContent = track.name;
            document.getElementById('ipod-artist').textContent = 'Laurenipsum';
            ipodAudio.src = track.downloadUrl;
            document.getElementById('ipod-progress-bar').style.width = '0%';
            document.getElementById('ipod-current-time').textContent = '0:00';
            document.getElementById('ipod-duration').textContent = '0:00';

            // Check if track name needs scrolling
            const trackEl = document.getElementById('ipod-track');
            if (trackEl.scrollWidth > trackEl.clientWidth) {
                trackEl.classList.add('scrolling');
            } else {
                trackEl.classList.remove('scrolling');
            }
        }

        function ipodPlayPause() {
            if (ipodTracks.length === 0) return;

            if (isPlaying) {
                ipodAudio.pause();
                isPlaying = false;
                document.getElementById('ipod-status').textContent = '‚è∏';
            } else {
                ipodAudio.play();
                isPlaying = true;
                document.getElementById('ipod-status').textContent = '‚ñ∂';
            }
        }

        function ipodNext() {
            if (ipodTracks.length === 0) return;
            currentTrackIndex = (currentTrackIndex + 1) % ipodTracks.length;
            loadTrack(currentTrackIndex);
            if (isPlaying) ipodAudio.play();
        }

        function ipodPrev() {
            if (ipodTracks.length === 0) return;
            currentTrackIndex = (currentTrackIndex - 1 + ipodTracks.length) % ipodTracks.length;
            loadTrack(currentTrackIndex);
            if (isPlaying) ipodAudio.play();
        }

        function ipodMenu() {
            // Future: show track list menu
        }

        function formatTime(seconds) {
            const mins = Math.floor(seconds / 60);
            const secs = Math.floor(seconds % 60);
            return `${mins}:${secs.toString().padStart(2, '0')}`;
        }

        ipodAudio.addEventListener('timeupdate', () => {
            if (ipodAudio.duration) {
                const progress = (ipodAudio.currentTime / ipodAudio.duration) * 100;
                document.getElementById('ipod-progress-bar').style.width = progress + '%';
                document.getElementById('ipod-current-time').textContent = formatTime(ipodAudio.currentTime);
            }
        });

        ipodAudio.addEventListener('loadedmetadata', () => {
            document.getElementById('ipod-duration').textContent = formatTime(ipodAudio.duration);
        });

        ipodAudio.addEventListener('ended', () => {
            ipodNext();
        });

        // iPod dragging (separate from windows)
        function startIpodDrag(e) {
            if (e.target.tagName === 'BUTTON') return;
            ipodDragging = true;
            const rect = ipodElement.getBoundingClientRect();
            const clientX = e.touches ? e.touches[0].clientX : e.clientX;
            const clientY = e.touches ? e.touches[0].clientY : e.clientY;
            dragOffset.x = clientX - rect.left;
            dragOffset.y = clientY - rect.top;
            if (e.touches) e.preventDefault();
        }

        function moveIpodDrag(e) {
            if (!ipodDragging) return;
            const clientX = e.touches ? e.touches[0].clientX : e.clientX;
            const clientY = e.touches ? e.touches[0].clientY : e.clientY;
            const x = clientX - dragOffset.x;
            const y = clientY - dragOffset.y;
            ipodElement.style.left = Math.max(0, x) + 'px';
            ipodElement.style.top = Math.max(0, y) + 'px';
            if (e.touches) e.preventDefault();
        }

        function endIpodDrag() {
            ipodDragging = false;
        }

        ipodElement.addEventListener('mousedown', startIpodDrag);
        ipodElement.addEventListener('touchstart', startIpodDrag, { passive: false });
        document.addEventListener('mousemove', moveIpodDrag);
        document.addEventListener('touchmove', moveIpodDrag, { passive: false });
        document.addEventListener('mouseup', endIpodDrag);
        document.addEventListener('touchend', endIpodDrag);

        // Load data on page load
        loadPaintings();
        loadPosts();
        loadTracks();

        // ===== SHOOTING STARS =====
        function createShootingStar() {
            const star = document.createElement('div');
            star.className = 'shooting-star';
            star.style.left = Math.random() * 70 + '%';
            star.style.top = Math.random() * 40 + '%';
            document.body.appendChild(star);

            // Trigger animation
            setTimeout(() => star.classList.add('animate'), 10);

            // Remove after animation
            setTimeout(() => star.remove(), 1600);
        }

        // Create shooting stars at random intervals
        function scheduleShootingStar() {
            const delay = Math.random() * 4000 + 2000; // 2-6 seconds
            setTimeout(() => {
                createShootingStar();
                scheduleShootingStar();
            }, delay);
        }
        scheduleShootingStar();
    </script>
</body>
</html>
